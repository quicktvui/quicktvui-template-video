<template>
  <qt-column class="media-introduction-root-css">
    <qt-column class="media-introduction-css">
      <!-- 标题 -->
      <text-view
        class="media-introduction-title-text-css"
        :duplicateParentState="true"
        :focusable="false"
        :textSize="60"
        :ellipsizeMode="2"
        enablePostTask
        postDelay="200"
        :lines="1"
        gravity="left"
        :text="title"/>

      <!-- 底部介绍 -->
      <qt-column
        class="media-introduction-detail-root-css"
        :enableFocusBorder="true"
        :clipChildren="false"
        :focusable="true"
        @click="onClick"
        @focus="onFocus"
        focusScale="1.05">

        <!-- 第一行 -->
        <qt-row :duplicateParentState="true">
          <div class="media-introduction-detail-vip-css"
               :gradientBackground="{colors:['#A06419','#CDA048'], orientation: 6, cornerRadii4: [4, 4, 4, 4]}">
            <text-view
              class="media-introduction-detail-vip-text-css"
              :duplicateParentState="true"
              :focusable="false"
              :textSize="24"
              :ellipsizeMode="2"
              enablePostTask
              postDelay="200"
              :lines="1"
              gravity="center"
              text="影视VIP"/>
          </div>

          <div class="media-introduction-detail-score-css">
            <text-view
              class="media-introduction-detail-score-text-css"
              :duplicateParentState="true"
              :focusable="false"
              :textSize="24"
              :ellipsizeMode="2"
              enablePostTask
              postDelay="200"
              :lines="1"
              gravity="center"
              :text="score"/>
          </div>

          <text-view
            class="media-introduction-detail-brief-text-css"
            :duplicateParentState="true"
            :focusable="false"
            :textSize="24"
            :ellipsizeMode="2"
            enablePostTask
            postDelay="200"
            :lines="1"
            gravity="left|center"
            :text="subtitle"/>
        </qt-row>

        <!-- 第二行 -->
        <text-view
          class="media-introduction-detail-actor-text-css"
          :duplicateParentState="true"
          :focusable="false"
          :textSize="24"
          :ellipsizeMode="2"
          enablePostTask
          postDelay="200"
          :lines="1"
          gravity="left|center"
          :text="actors"/>

        <!-- 第三行 -->
        <text-view
          class="media-introduction-detail-text-css"
          :duplicateParentState="true"
          :focusable="false"
          :textSize="24"
          :lineSpacing="6"
          :lineHeight="30"
          :ellipsizeMode="2"
          enablePostTask
          postDelay="200"
          :lines="1"
          gravity="left|center"
          :text="introduction"/>
      </qt-column>
    </qt-column>
  </qt-column>
</template>

<script lang="ts">

import {defineComponent} from "@vue/runtime-core";
import {IMedia} from "../../../datasource/media/IMedia";
import {ref} from "vue";
import {useESRouter} from "@extscreen/es3-router";

export default defineComponent({
  name: "media-introduction",
  emits: ['onIntroductionFocus'],
  setup(props, context) {
    const router = useESRouter()
    const title = ref<string>('')
    const score = ref<string>('')
    const subtitle = ref<string>('')
    const actors = ref<string>('')
    const introduction = ref<string>('')

    let m: IMedia

    function initMedia(media: IMedia) {
      m = media
      if (media.title != null) {
        title.value = media.title
      }
      score.value = media.score
      if (media.subtitle != null) {
        subtitle.value = media.subtitle
      }
      actors.value = media.actors
      introduction.value = media.introduction
    }

    function onClick() {
      router.push({
        name: 'introduction',
        params: m
      });
    }

    function onFocus(e) {
      context.emit('onIntroductionFocus', e.isFocused)
    }

    return {
      initMedia,
      title,
      score,
      subtitle,
      actors,
      introduction,
      onClick,
      onFocus
    }
  },
});

</script>

<style scoped>
.media-introduction-root-css {
  width: 904px;
  height: 280px;
  left: 1016px;
  position: absolute;
}

.media-introduction-css {
  width: 814px;
  height: 280px;
}

.media-introduction-title-text-css {
  width: 814px;
  height: 60px;
  font-size: 54px;
  font-weight: 400;
  color: #FFFFFF;
}


.media-introduction-detail-root-css {
  width: 846px;
  height: 196px;
  margin-top: 20px;
  padding: 20px;
  border-radius: 12px;
  background-color: rgba(255, 255, 255, 0.1);
}

.media-introduction-detail-vip-css {
  margin-right: 20px;
  border-color: #F7B500;
  align-items: center;
  display: flex;
  height: 36px;
  width: 100px;
  flex-direction: row;
  justify-content: center
}

.media-introduction-detail-vip-text-css {
  font-size: 24px;
  color: #FFFFFF;
  margin-left: 12px;
  margin-right: 12px;
  height: 36px;
  width: 100px;
}

.media-introduction-detail-score-css {
  border-radius: 4px;
  margin-right: 20px;
  border-color: #F7B500;
  border-width: 1.5px;
  align-items: center;
  display: flex;
  width: 60px;
  height: 32px;
  flex-direction: row;
  justify-content: center
}

.media-introduction-detail-score-text-css {
  top: -1px;
  font-size: 24px;
  color: #F7B500;
  width: 60px;
  height: 32px;
}

.media-introduction-detail-brief-text-css {
  color: rgba(255, 255, 255, 0.6);
  focus-color: white;
  height: 28px;
  width: 814px;
  margin-bottom: 26px;
}

.media-introduction-detail-actor-text-css {
  height: 28px;
  width: 814px;
  color: rgba(255, 255, 255, 0.6);
  focus-color: white;
  margin-bottom: 20px;
}

.media-introduction-detail-text-css {
  color: rgba(255, 255, 255, 0.6);
  focus-color: white;
  height: 28px;
  width: 814px;
  background-color: transparent;
  margin-top: 6px;
  margin-bottom: 6px;
}
</style>
